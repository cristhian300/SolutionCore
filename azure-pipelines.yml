trigger:
  branches:
    include:
      - master # Cambia al nombre de la rama que deseas sincronizar

pool:
  vmImage: 'ubuntu-latest'

variables:
  GITHUB_REPO_URL: "https://$(GitHubPAT)@github.com/cristhian300/SolutionCore.git"
  GITHUB_TOKEN: $(GitHubPAT) # GitHub PAT configurado en Azure DevOps como secreto


steps:


  - script: |
     
     mkdir copyrepo
     
     $sourceURL = "https://$(azure_token)@$@dev.azure.com/MagicAzure/SolutionCore/_git/SolutionCore"
     #$sourceURL = "https://$(GITPAT)@$(GITREPO)"
     $destURL = "https://$(AZUREREPOPAT)@$(AZUREPO)"

     cd copyrepo 
     git clone --mirror $sourceURL

     cd SolutionCore.git
/*
Write-Host "*****Git removing remote origin****"
git remote rm origin
Write-Output "*****Git remote add****"
git remote add --mirror=fetch origin $destURL
Write-Output "*****Git fetch origin****"
git fetch $sourceURL
Write-Output "*****Git push to Azure Repos****"
git push origin --all -f*/
      
       
    displayName: 'Sincronizar con GitHub'
    env:
      GITHUB_TOKEN: $(GITHUB_TOKEN)