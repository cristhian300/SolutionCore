
#trigger:
#- master

pool:
  vmImage: ubuntu-latest

variables:

#-buidConfiguration: 'Release'
- name: one
  value: initialValue 
 
steps:

  
- script: |
      echo ${{ variables.one }} # outputs initialValue
      echo $(one)
  displayName: First variable pass

 
- task: PowerShell@2
  displayName: 'Set new variable value'
  condition:  eq(variables['Build.SourceBranch'], 'refs/heads/qa')
  inputs:
    targetType: 'inline'
    script: |
     
      echo "##vso[task.setvariable variable=one]secondValue"

  
- script: |
    echo ${{ variables.one }} # outputs initialValue
    echo $(one) # outputs secondValue
  displayName: Second variable pass

#- script: |
  #   echo version de ubuntu
   #  lsb_release -a
   #  cd $(System.DefaultWorkingDirectory)/Services/SolutionCore.API/src/API
   #  echo directorio
   #  pwd
    # ls -la


# - task: DotNetCoreCLI@2
#   displayName: 'compilacion'
#   inputs:
#     command: 'build'
#     projects: '$(System.DefaultWorkingDirectory)/Services/SolutionCore.API/src/API/**/*.csproj'
#     arguments:  '--configuration Release'  
#     workingDirectory: 'Services/SolutionCore.API/src/API'
  
# - task: DotNetCoreCLI@2
#   displayName: 'publicacion'
#   inputs:
#     command: 'publish'
#     publishWebProjects: false
#     workingDirectory: '$(System.DefaultWorkingDirectory)/Services/SolutionCore.API/src/API/'
 
#     arguments:  '--configuration $(buidConfiguration)  --output $(Build.ArtifactStagingDirectory) /p:EnvironmentName=Development'  

#     zipAfterPublish: false
  
#   #guarda el artefacto para el release
# - task: PublishBuildArtifacts@1
#   inputs:
#     PathtoPublish: '$(Build.ArtifactStagingDirectory)'
#     ArtifactName: 'drop'